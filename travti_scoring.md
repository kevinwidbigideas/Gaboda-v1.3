TraVTI Scoring에 관한 md이며, 각 질문당 몇 점인지, 분류는 어떻게 하는지 그리고 그룹 적합도는 어떻게 구하는지에 대한 설명을 담은 md파일이다.




### 지표 정의 (Target Definition)

| 지표 (Target) | 관련 문항 (Index) | 가중치 (Weight) | 계산식 (Normalization) |
| :--- | :--- | :--- | :--- |
| **에너지 (E/I)** | Q5, Q8, Q12, Q19 | Q19: 1.5 | $S_{EI} = \sum Score / 4.5$ |
| **인식 (S/N)** | Q7, Q9, Q10, Q18 | Q10: 1.5 | $S_{SN} = \sum Score / 4.5$ |
| **판단 (T/F)** | Q11, Q15, Q16, Q17 | Q16: 1.5 | $S_{TF} = \sum Score / 4.5$ |
| **생활 (J/P)** | Q1, Q2, Q3, Q14 | Q14: 1.5 | $S_{JP} = \sum Score / 4.5$ |
| **체력 (Stamina)** | Q6 | 단일 | - |
| **음주 (Alcohol)** | Q13 | 단일 | 0.9(필수) / 0.5(선택) / 0.1(불호) |
| **식성 (Food)** | Q4 | - | 리스트 필터링 (Negative Keywords) |

### 3.0 문항별 배점 상세 (Scoring Details)
*현재 코드(`result.py`)와 질문지(`test.py`) 기준 매핑*
EI 4.5 = E, -4.5 = I
SN 4.5 = S, -4.5 = N
TF 4.5 = T, -4.5 = F
JP 4.5 = J, -4.5 = P


| 번호 | 질문 제목 (요약) | 옵션 및 배점 (Code Logic) | 반영 지표 | 비고/매핑 이슈 |
| :---: | :--- | :--- | :---: | :--- |
| **Q1** | 여행 준비 스타일 | 1: 꼼꼼(+1) / 2: 대충(-1) | **J/P** | 1=J, -1=P |
| **Q2** | 공항 도착 시간 | 1: 3시간전(+1) / 2: 2시간전(-1) | **J/P** | 1=J, -1=P |
| **Q3** | 숙소 기준 | 1: 효율(+1) / 2: 감성(-1) | **J/P** | 1=J, -1=P |
| **Q4** | 못 먹는 음식 | (입력값) | **-** | 필터링용 |
| **Q5** | 여행 밀도 | 1: 바로출발(+1) / 2: 휴식(-1) | **E/I** | 1=E, -1=I |
| **Q6** | 도시 탐험 스타일 | 1(0.25) / 2(0.5) / 3(0.75) / 4(1.0) | **Stamina** | 체력 점수 |
| **Q7** | 흥미 포인트 | 1: 오감(+1) / 2: 영감(-1) | **S/N** | 1=S, -1=N |
| **Q8** | 돌발상황 대처 | 1: 도움요청(+1) / 2: 스스로(-1) | **E/I** | 1=E, -1=I |
| **Q9** | 랜드마크 설명 | 1: 정보(+1) / 2: 서사(-1) | **S/N** | 1=S, -1=N |
| **Q10** | 식당 선택 | 1: 리뷰(+1.5) / 2: 느낌(-1.5) | **S/N** (x1.5) | 1.5=S, -1.5=N |
| **Q11** | 효율의 무게 | 1: 대안(+1) / 2: 기다림(-1) | **T/F** | 1=T, -1=F |
| **Q12** | 저녁 분위기 | 1: 펍(+1) / 2: 숙소(-1) | **E/I** |  (1=E, -1=I) |
| **Q13** | 음주 성향 | 1: 필수(0.9) / 2: 선택(0.5) / 3: 불호(0.1) | 알코올 | 알코올 변수 |
| **Q14** | 내일 일정 결정 | 1: 계획(+1.5) / 2: 기분(-1.5) | **J/P** (x1.5) | 1.5=J, -1.5=P |
| **Q15** | 폐업 대처 | 1: 대안(+1) / 2: 위로(-1) | **T/F** | 1=T, -1=F |
| **Q16** | 부모님 일정 | 1: 해결(+1.5) / 2: 공감(-1.5) | **T/F** (x1.5) | 1.5=T, -1.5=F |
| **Q17** | 갈등 해결 | 1: 각자(+1) / 2: 양보(-1) | **T/F** | (1=T, -1=F) |
| **Q18** | 기념품 선택 | 1: 실용(+1.5) / 2: 의미(-1.5) | **S/N** (x1.5) | 1.5=S, -1.5=N |
| **Q19** | 만족 포인트 | 1: 꽉찬(+1.5) / 2: 여유(-1.5) | **E/I** (x1.5) | 1.5=E, -1.5=I |




TraVTI
현실 기반 그룹 여행 최적화 알고리즘
WHI (Weighted Harmony Index) v0.9

1. 핵심 철학 (Core Philosophy)
모든 여행자는 평등하지 않다. 우리는 ‘관계’를 계산한다.
기존 여행 추천 알고리즘의 한계:
모든 참여자의 취향을 동일 비중(1/N)으로 평균화


효도 여행, 의전 여행, 기념일 여행에서 실패 확률이 높음


“모두를 조금씩 만족시키려다, 가장 중요한 사람을 놓침”


TraVTI의 해결:
단순 성향 매칭 ❌


**성향 + 체력 + 음주 + 관계의 권력 구조(Anchor)**를 함께 계산

현재 기준은 앵커까지 반영 x

여행의 “즐거움”보다 “갈등 발생 확률”을 더 정확히 모델링



2. 입력 데이터 정의 (The Inputs)
유저 i는 3가지 차원으로 정의된다

2.1 성향 (Personality) – 65%
4차원 성향 벡터

MVP 단계에서는 안정성과 해석 가능성을 위해 8단계 양자화

-1
-0.5556
-0.3333
-0.1111
+0.1111
+0.3333
+0.5556
+1

의미:
 “같다/다르다”가 아니라
 **얼마나 다른지(diff)**와 **얼마나 강한 성향인지(intensity)**를 함께 본다.


2.2 체력 (Stamina) – 25%
여행의 지속 가능성(tempo synchronization) 변수


체력 차이가 클수록:


일정 유지 비용 증가


휴식/속도 조정으로 인한 불만 발생


2.3 음주 스타일 (Alcohol) – 10%
여행의 밤 문화 코드


낮 일정과는 다른 갈등/시너지 발생 지점



(참고) 음식 취향
점수화하지 않음


최종 일정 생성 시 **LLM 프롬프트의 Constraint(제약 조건)**로만 활용
 → “점수는 관계, 음식은 운영 문제”


3. 2인 궁합 계산 로직 (Pairwise Logic)
목표:
“유저 i와 j가 함께 여행할 때의 현실적인 체감 점수”

3.1 성향 차이 등급화 (Score Matrix v2)
왜 단순 diff가 아닌가?
같은 차이(diff)라도,
성향이 약한 사람 vs


성향이 매우 강한 사람
 → 여행에서의 체감 갈등은 완전히 다르다.


TraVTI는 이를 위해:
**차이(diff)**와


**성향 강도(intensity)**를 동시에 고려한
 룰 기반 등급화 매트릭스를 사용한다.



3.1.1 핵심 변수 정의
diffd=∣scorei,d−scorej,d∣diff_d = |score_{i,d} - score_{j,d}|diffd​=∣scorei,d​−scorej,d​∣

### 3.1.2 성향 차이에 따른 9가지 분류 (9 Cases of Diff)

두 유저 간의 정규화된 성향 벡터 차이(`diff_d`)에 따라 관계를 9가지 등급으로 분류한다.

| Case | Difference Range (`diff_d`) | Classification | Description | Risk Level | Score |
| :---: | :---: | :--- | :--- | :---: | :---: |
| **Case 1** | 0 | **Perfect Match** | 성향이 완벽히 일치함. 최고의 파트너. | ☆☆☆☆☆ | 18 |
| **Case 2** | ~ 0.22 | **Slight Gap** | 아주 미세한 차이. 자연스러운 조율 가능. | ★☆☆☆☆ | 16 |
| **Case 3** | ~ 0.44 | **Minor Diff** | 가벼운 선호도 차이. 대화로 소거 가능. | ★★☆☆☆ | 14 |
| **Case 4** | ~ 0.67 | **Moderate Diff** | 뚜렷한 관점 차이. 상호 배려가 필요한 단계. | ★★★☆☆ | 12 |
| **Case 5** | ~ 0.89 | **Major Diff** | 결정적인 스타일 차이. 구체적인 룰(Rule) 필요. | ★★★★☆ | 10 |
| **Case 6** | ~ 1.11 | **Strong Contrast** | 서로 다른 여행 스타일. 타협이 어렵기 시작함. | ★★★★☆ | 8 |
| **Case 7** | ~ 1.33 | **High Conflict** | 강한 충돌 예상. 일정의 일부 분리(Separation) 권장. | ★★★★½ | 6 |
| **Case 8** | ~ 1.56 | **Critical Divergence** | 매우 큰 차이. 함께 여행 시 지속적인 마찰 위험. | ★★★★★ | 4 |
| **Case 9** | ~ 2.0 | **Polar Opposite** | 정반대 성향 (물과 기름). 함께 여행 시 고위험군. | ★★★★★ | 2 |


여기서 유저별로 나오는 점수를
가중치:
EI 0.35


SN 0.25


TF 0.20


JP 0.20
를 줘서 총 65점이 나온다


3.3 체력 및 음주 점수

### 3.3.1 체력 점수 (Stamina Score)

두 유저 간의 체력 점수 차이(`diff_s`)에 따라 점수를 부여한다.
체력 등급은 0.25, 0.5, 0.75, 1.0의 4단계로 구분된다.

점수는 체력 부분에서 25점이 나오기 때문에 25점 만점으로 계산한다.
$$
diff_s = |Stamina_i - Stamina_j|
$$

| Case | Difference Range (`diff_s`) | Description | Score |
| :---: | :---: | :--- | :---: |
| **Case 1** | 0 | **Perfect Match** (체력 수준 동일) | 25|
| **Case 2** | 0.25 | **Minor Gap** (한 단계 차이) | 20
| **Case 3** | 0.5 | **Major Gap** (두 단계 차이) | 15
| **Case 4** | 0.75 | **High Conflict** (세 단계 차이 - 극과 극) |10|

체력 부분의 총점은 25점이지만 case4에 10점을 준 이유는 점수가 너무 낮게 나온다고 여행 자체를 하지말라는 의도나 뉘앙스를 풍기기 싫기 때문이다.


### 3.3.2 음주 점수 (Alcohol Score)

두 유저의 음주 성향 조합에 따라 점수를 부여한다.
음주 점수는 총 10점 만점으로 계산된다.

| Case | Combination | Description | Score |
| :---: | :---: | :--- | :---: |
| **Case 1** | 둘 다 애주가(Essential) | **Perfect Match** (술로 통하는 사이) | 10 |
| **Case 2** | 둘 다 비음주(Hate) | **Peaceful Match** (카페/디저트 파) | 10 |
| **Case 3** | 둘 다 선택적(Optional) | **Flexible Match** (상황에 맞게 조율 가능하지만 조율이 필요한 영역) | 8 |
| **Case 4** | 선택적(Optional) vs 비음주(Hate) | **Minor Gap** (가벼운 배려 필요) | 6 |
| **Case 5** | 애주가(Essential) vs 선택적(Optional)| **Moderate Gap** (조율 필요) | 4 |
| **Case 6** | 애주가(Essential) vs 비음주(Hate) | **High Conflict** (저녁 일정 분리 권장) | 2 |

*체력 점수와 마찬가지로, 점수가 너무 낮게 나오면 부정적인 뉘앙스를 줄 수 있어 최저점을 2점으로 설정함.*


### 3.4 최종 2인 점수 (Total Score Calculation)

두 유저(i, j) 간의 최종 궁합 점수(Total Score)는 각 요소의 합산으로 계산되며, **100점 만점**이다.

$$
\text{Total Score} = \underbrace{\sum (\text{Trait Score}_{d})}_{65\%} + \underbrace{S_{Stamina}}_{25\%} + \underbrace{S_{Alcohol}}_{10\%}
$$

1.  **성향 점수 (Traits Score) - 65점 만점**
    - 4가지 성향(EI, SN, TF, JP)에 대한 Case별 점수 합산에 가중치를 적용한다.
    - $Trait Score = (Score_{EI} \times 0.35) + (Score_{SN} \times 0.25) + (Score_{TF} \times 0.20) + (Score_{JP} \times 0.20)$
    - *각 성향별 점수는 3.1.2 표 참조 (최대 18점 ~ 최소 2점)*
    - **보정:** 위 식의 결과값을 65점 만점으로 환산 (Scaling)

2.  **체력 점수 ($S_{Stamina}$) - 25점 만점**
    - 3.3.1 표 참조 (최대 25점 ~ 최소 10점)

3.  **음주 점수 ($S_{Alcohol}$) - 10점 만점**
    - 3.3.2 표 참조 (최대 10점 ~ 최소 2점)

---
